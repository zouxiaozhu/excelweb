# 表格快查 - 任务设置功能

## 功能概述

任务设置功能允许用户对已上传的Excel文件进行详细配置，包括数据字段选择、时间范围设置、过滤条件等。

## 功能特性

### 1. 基础设置
- **任务名称**: 显示当前任务的文件名（只读）
- **状态**: 可选择启用、禁用或暂停状态
- **开始时间**: 设置任务开始执行的时间
- **结束时间**: 设置任务结束的时间

### 2. 字段选择
- **多选字段**: 从预定义的字段列表中选择需要处理的列
- **支持字段类型**:
  - 序号 (serialNumber)
  - 日期 (date)
  - 使用时间 (usageTime)
  - 结束时间 (endTime)
  - 上车地点 (pickupLocation)
  - 途径地点 (viaLocation)
  - 下车地点 (dropoffLocation)
  - 车牌号 (plateNumber)
  - 司机姓名 (driverName)
  - 联系电话 (phoneNumber)
  - 费用 (cost)
  - 备注 (remarks)

### 3. 高级设置
- **数据过滤**: 支持自定义过滤条件
  - 示例: `日期 >= '2024-01-01' AND 费用 > 100`
- **排序规则**: 选择排序字段和排序方式（升序/降序）
- **快速操作**:
  - 全选: 选择所有可用字段
  - 清空: 清除所有字段选择
  - 常用字段: 快速选择常用字段组合

## 使用方法

### 1. 打开任务设置
1. 在表格快查页面的任务列表中
2. 找到需要设置的任务
3. 点击"设置"按钮

### 2. 配置任务参数
1. **设置状态**: 选择任务的运行状态
2. **配置时间**: 设置任务的开始和结束时间
3. **选择字段**: 勾选需要处理的Excel列
4. **高级配置**: 设置过滤条件和排序规则

### 3. 保存设置
1. 点击"保存"按钮
2. 系统会验证设置的有效性
3. 保存成功后会自动刷新任务列表

## 技术实现

### 组件结构
```
TaskSettingDialog.vue
├── 基础设置表单
├── 字段选择区域
├── 高级设置折叠面板
└── 操作按钮
```

### API接口
- `POST /excel/updateTaskSetting` - 更新任务设置

### 类型定义
```typescript
interface TaskSettingData {
  taskName: string
  status: 'enabled' | 'disabled' | 'paused'
  startTime: string
  endTime: string
  selectedFields: string[]
  dataFilter: string
  sortField: string
  sortOrder: 'asc' | 'desc'
}
```

## 验证规则

1. **必填字段**: 任务名称、状态、开始时间、结束时间
2. **时间验证**: 开始时间必须早于结束时间
3. **字段验证**: 至少选择一个字段
4. **数据格式**: 时间格式为 `YYYY-MM-DD HH:mm:ss`

## 注意事项

1. 任务名称不可修改，显示为原始文件名
2. 字段选择会影响后续的数据处理结果
3. 过滤条件支持基本的SQL语法
4. 设置保存后需要重新加载任务列表
5. 开发模式下会显示示例数据用于测试

## 扩展功能

未来可以考虑添加的功能：
- 字段映射配置
- 数据转换规则
- 定时任务设置
- 数据导出格式配置
- 批量任务设置
