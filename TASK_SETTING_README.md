# 表格快查 - 任务设置功能

## 功能概述

任务设置功能允许用户对已上传的Excel文件进行基础配置，包括数据字段选择和时间范围设置。

## 功能特性

### 1. 基础设置
- **任务名称(excelFile)**: 可编辑的任务名称
- **状态**: 可选择启用(Enable)或禁用(Disable)状态
- **状态显示**: 界面显示中文标签，接口调用使用英文值
- **开始时间**: 设置任务开始执行的时间（可选）
- **结束时间**: 设置任务结束的时间（可选）

### 2. 字段选择
- **多选字段**: 从后端数据中动态获取字段列表
- **横向布局**: 字段选项采用网格布局，自动换行显示
- **可用字段**: 从 `data.records[0].extendData.headers` 获取所有可选字段
- **已选字段**: 从 `data.records[0].extendData.searchHeaders` 获取已选中的字段
- **动态更新**: 字段选项根据实际Excel文件的列名动态生成
- **无默认值**: 完全依赖后端数据，不提供默认字段选项

## 使用方法

### 1. 打开任务设置
1. 在表格快查页面的任务列表中
2. 找到需要设置的任务
3. 点击"设置"按钮

### 2. 配置任务参数
1. **设置任务名称**: 输入或修改任务名称
2. **设置状态**: 选择任务的运行状态
3. **配置时间**: 可选择设置任务的开始和结束时间（可选）
4. **选择字段**: 勾选需要处理的Excel列

### 3. 保存设置
1. 点击"保存"按钮
2. 系统会验证设置的有效性
3. 保存成功后会自动刷新任务列表

### 4. 删除任务
1. 点击"删除"按钮
2. 系统会弹出确认对话框
3. 确认删除后，任务将被永久删除
4. 删除成功后会自动刷新任务列表

## 任务列表显示

任务列表中显示以下信息：
- **任务名**: 显示任务的文件名
- **状态**: 显示任务的当前状态（启用/禁用/错误）
- **开始时间**: 显示任务的开始时间，未设置时显示"未设置"
- **结束时间**: 显示任务的结束时间，未设置时显示"未设置"
- **创建时间**: 显示任务的创建时间
- **操作**: 提供查看详情、下载文件、设置、删除等操作

## 技术实现

### 组件结构
```
TaskSettingDialog.vue
├── 基础设置表单
├── 字段选择区域（横向网格布局）
└── 操作按钮
```

### API接口
- `POST /excel/updateParseFile` - 更新任务设置
- `DELETE /excel/deleteTask` - 删除任务

### 请求参数结构
```typescript
interface UpdateTaskRequest {
  id: string                    // 任务ID
  excelFile: string            // 任务名称
  status: string               // 状态
  startTime: string | null     // 开始时间（可选）
  endTime: string | null       // 结束时间（可选）
  extendData: {
    headers: string[]          // 表头字段
    searchHeaders: string[]    // 搜索字段
  }
}
```

### 类型定义
```typescript
interface TaskSettingData {
  excelFile: string
  status: 'Enable' | 'Disable'
  startTime: string
  endTime: string
  extendData: {
    headers: string[]
    searchHeaders: string[]
  }
}
```

## 验证规则

1. **必填字段**: 任务名称、状态
2. **可选字段**: 开始时间、结束时间、多选字段
3. **时间验证**: 如果同时填写开始和结束时间，则开始时间必须早于结束时间
4. **数据格式**: 时间格式为 `YYYY-MM-DD HH:mm:ss`

## 注意事项

1. 任务名称可以自由编辑
2. 开始时间和结束时间都是可选的，可以为空
3. 字段选择会影响后续的数据处理结果
4. 设置保存后需要重新加载任务列表
5. 开发模式下会显示示例数据用于测试

## 扩展功能

未来可以考虑添加的功能：
- 字段映射配置
- 数据转换规则
- 定时任务设置
- 数据导出格式配置
- 批量任务设置
